<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCQ Submission Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Inter', sans-serif;
            }
            .question-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 1.5rem;
            }
            /* Custom radio button styles */
            .radio-label {
                display: inline-flex;
                align-items: center;
                cursor: pointer;
                padding: 0.5rem 1rem;
                border: 2px solid #4A5568; /* gray-700 */
                border-radius: 0.375rem; /* rounded-md */
                transition: all 0.2s ease-in-out;
                width: 100%;
            }
            .radio-label:hover {
                background-color: #2D3748; /* gray-800 */
            }
            input[type="radio"]:checked + .radio-label {
                background-color: #3182CE; /* blue-600 */
                border-color: #3182CE; /* blue-600 */
                color: white;
            }
            input[type="radio"] {
                display: none;
            }
        </style>
</head>
<body class="bg-gray-100 text-gray-900 flex items-center justify-center min-h-screen p-4 sm:p-6 lg:p-8">

    <div class="w-full max-w-4xl mx-auto">
    <div id="form-container" class="bg-white p-8 rounded-2xl shadow-2xl border border-gray-200">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-cyan-400">MCQ Submission Form</h1>
                <p class="text-gray-400 mt-2">Please fill in your details and answer all questions.</p>
            </div>

            <form id="mcq-form">
                <!-- Student Information -->
                <fieldset class="mb-8 p-6 bg-gray-100 rounded-lg border border-gray-200">
                    <legend class="text-xl font-semibold mb-4 text-black px-2">Student Information</legend>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                            <input type="text" id="name" name="name" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                        </div>
                        <div>
                            <label for="universityId" class="block text-sm font-medium text-gray-700 mb-1">University ID</label>
                            <input type="text" id="universityId" name="universityId" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                            <input type="email" id="email" name="email" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                        </div>
                        <div>
                            <label for="courseCode" class="block text-sm font-medium text-gray-700 mb-1">Course Code</label>
                            <select id="courseCode" name="courseCode" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                                <option value="">Select Course</option>
                                <option value="CT403">CT403-Operating System</option>
                                <option value="MIS307">MIS307-Data Structure</option>
                                <option value="MIS400">MIS400-Application Programming</option>
                                <option value="CNE306">CNE306-Digital Logic</option>
                            </select>
                        </div>
                        <div>
                            <label for="teacherName" class="block text-sm font-medium text-gray-700 mb-1">Teacher Name</label>
                            <select id="teacherName" name="teacherName" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                                <option value="">Select Teacher</option>
                                <option value="Dr. Nayyar">Dr. Nayyar</option>
                                <option value="Dr. Turkea">Dr. Turkea</option>
                                <option value="Dr. Suha">Dr. Suha</option>
                                <option value="Dr. Saeed">Dr. Saeed Alshahrani</option>
                            </select>
                        </div>
                        <div>
                            <label for="sectionNumber" class="block text-sm font-medium text-gray-700 mb-1">Section Number</label>
                            <input type="text" id="sectionNumber" name="sectionNumber" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                        </div>
                        <div>
                            <label for="chapterNumber" class="block text-sm font-medium text-gray-700 mb-1">Chapter Number</label>
                            <input type="text" id="chapterNumber" name="chapterNumber" required class="w-full bg-gray-50 border border-gray-300 rounded-md p-2 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 outline-none transition">
                        </div>
                    </div>
                </fieldset>

                <!-- MCQ Questions -->
                <fieldset class="p-6 bg-gray-100 rounded-lg border border-gray-200">
                    <legend class="text-xl font-semibold mb-6 text-black px-2">Questions</legend>
                    <div id="questions-container" class="question-grid">
                        <!-- Questions will be dynamically generated here -->
                    </div>
                </fieldset>

                <!-- Submission Button -->
                <div class="mt-8 text-center">
                    <button type="submit" id="submit-btn" class="bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-3 px-8 rounded-lg transition-all transform hover:scale-105 w-full md:w-auto disabled:opacity-50 disabled:cursor-wait">
                        Submit Answers
                    </button>
                </div>
            </form>
            <div id="status-message" class="mt-6 text-center text-lg"></div>
        </div>

        <!-- Success Message Container -->
    <div id="success-container" class="hidden text-center bg-white p-8 rounded-2xl shadow-2xl border border-gray-200">
            <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-12 h-12 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h2 class="text-3xl font-bold text-green-600">Submission Successful!</h2>
            <p class="text-gray-700 mt-3">Your answers have been recorded. Thank you.</p>
        </div>
    </div>


    <script>
        // --- CONFIGURATION ---
        // IMPORTANT: Replace this URL with the one you get from Google Apps Script deployment.
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwB1zSe5T7xe4Zc-OVO9HqHhfGJnCo6EQ8nHgvJuKskWgRgUnsnICwnu0-O7XZzAgX2/exec"; 
        const TOTAL_QUESTIONS = 25;

        const form = document.getElementById('mcq-form');
        const submitBtn = document.getElementById('submit-btn');
        const statusMessage = document.getElementById('status-message');
        const questionsContainer = document.getElementById('questions-container');

        // Dynamically generate questions
        for (let i = 1; i <= TOTAL_QUESTIONS; i++) {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'p-4 bg-white rounded-lg shadow-md border border-gray-200';
            
            let optionsHTML = '';
            ['A', 'B', 'C', 'D'].forEach(option => {
                optionsHTML += `
                    <div class="mt-2">
                        <input type="radio" id="q${i}${option}" name="q${i}" value="${option}" required>
                        <label for="q${i}${option}" class="radio-label">${option}</label>
                    </div>
                `;
            });

            questionDiv.innerHTML = `
                <p class="font-semibold text-gray-700">Question ${i}</p>
                <div class="flex flex-col gap-2 mt-2">
                    ${optionsHTML}
                </div>
            `;
            questionsContainer.appendChild(questionDiv);
        }

        form.addEventListener('submit', function(e) {
            e.preventDefault();

            // Check if placeholder URL is still there
            if (SCRIPT_URL === "YOUR_GOOGLE_APPS_SCRIPT_URL_HERE") {
                statusMessage.textContent = "Error: The form is not configured by the administrator yet.";
                statusMessage.className = 'mt-6 text-center text-lg text-red-400';
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            statusMessage.textContent = 'Please wait while we submit your answers.';
            statusMessage.className = 'mt-6 text-center text-lg text-yellow-400';

            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => data[key] = value);
            // Course Code and Teacher Name are included as select fields
            // No further changes needed as they are part of the formData

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Important for Google Apps Script web apps
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(res => {
                // Because of 'no-cors' mode, we can't read the response.
                // We will assume success if the request doesn't throw an error.
                document.getElementById('form-container').classList.add('hidden');
                document.getElementById('success-container').classList.remove('hidden');
            })
            .catch(error => {
                statusMessage.textContent = 'An error occurred. Please try again.';
                statusMessage.className = 'mt-6 text-center text-lg text-red-400';
                console.error('Error!', error.message);
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Answers';
            });
        });
    </script>
</body>
</html>
